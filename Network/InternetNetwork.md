## 인터넷 통신

## IP (인터넷 프로토콜)

- 인터넷 프로토콜의 역할
    - 지정한 IP 주소 (IP Address)에 데이터 전달
    - 패킷(Packet)이라는 통신 단위로 데이터 전달
- IP 패킷 정보
    - 출발 IP, 목적지 IP, 기타 ...
    - 전송 데이터

## IP 프로토콜의 한계

- 비연결성
    - 패킷을 받을 대상이 없거나, 서비스 불능 상태여도 패킷 전송
    - 대상 서버(클라이언트)가 패킷을 받을 수 있는 상태인지 모름
- 비신뢰성
    - 중간에 패킷이 사라지면?
    - 패킷이 순서대로 안오면? (보통 1500byte가 넘으면 데이터를 한번에 보내지 않고 끊어서 보낸다)
- 프로그램 구분
    - 같은 IP를 사용하는 서버에서 통신하는 애플리케이션이 둘 이상이면?

## TCP, UDP

- 인터넷 프로토콜 스택의 4계층
    - 애플리케이션 계층 - HTTP, FTP
    - 전송 계층 - TCP, UDP
    - 인터넷 계층 - IP
    - 네트워크 인터페이스 계층
- 프로그램 메시지 전송 과정
    1. 프로그램이 Hello, World! 메시지 생성
    2. 애플리케이션 계층에서 Socket Library를 통해 OS 계층으로 전달
    3. OS 계층에서 TCP 정보 생성, 메시지 데이터를 포함.
    4. OS 계층에서 IP 패킷 생성, TCP 데이터 포함. 후에, 네트워크 인터페이스 계층으로 전달
    Ethernet frame??
- TCP 세그먼트
    - 출발지 PORT
    - 목적지 PORT
    - 전송 제어, 순서, 검증 정보

### TCP의 특징

- 전송 제어 프로토콜(Transmission Control Protocol)
- 연결 지향 - TCP 3 way handshake (가상 연결) (물리적으로 직접 연결 된 것이 아님)
    - 3 way handshake의 과정
        1. 클라이언트에서 서버로 SYN 메시지 전송
        2. 서버가 수신 후 SYN + ACK 메시지 전송
        3. 클라이언트가 수신 후 서버로 ACK 메시지 전송 (데이터도 전송 가능)
- 데이터 전달 보증
- 순서 보장
    - 데이터가 순서대로 오지 않을 경우 순서대로 오지 않은 패킷 부터 다시 보내라고 서버에서 클라이언트에게 요청함
    - TCP 세그먼트의 내부 전송 제어 정보, 순서 정보, 제어 정보를 참고하여 요청함
- 신뢰할 수 있는 프로토콜
- 현재는 대부분 TCP 사용

### UDP의 특징

- 하안 도화지에 비유 (기능이 거의 없음)
- 연결 지향 - TCP 3 way handshake X
- 데이터 전달 보증 X
- 순서 보장 X
- 데이터 전달 및 순서가 보장되지 않지만, 단순하고 빠름
- 정리
    - IP와 거의 같다. +PORT +체크섬 정도만 추가
    - 애플리케이션에서 추가 작업 필요

## PORT (항구!)

- 한번에 둘 이상 연결해야 하면? PORT로 해결할 수 있다.
- IP는 서버를 찾는 거라면, PORT는 애플리케이션을 구분하는 용도로 쓰인다.
- 좀 더 정리하자면
    - 같은 IP 내에서 프로세스를 구분
- 0 ~ 65535: 할당 가능
- 0 ~ 1023: 잘 알려진 포트, 사용하지 않는 것이 좋음
- FTP - 20, 21
- TELNET - 23
- HTTP - 80
- HTTPS - 443

## DNS (Domain Name System)

- IP는 외우기 어렵고, **변경될 수 있다**
    - 전화번호부, 도메인 명을 IP 주소로 변환
    - 도메인 명과 IP 주소를 맵핑함. ex) [google.com](http://google.com) == 200.200.200.2
    - 클라이언트는 DNS 서버에 [google.com](http://google.com)으로 접근하기 때문에 IP 주소가 바뀌어도 바뀐 IP 주소를 응답 받기 때문에 IP주소가 바뀌어도 문제가 없다.